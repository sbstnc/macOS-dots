{"version":3,"sources":["../src/phoenix.es6"],"names":["HIDDEN_DOCK_MARGIN","INCREMENT","MOVE_BY","CONTROL_SHIFT","CONTROL_ALT_SHIFT","LEFT","RIGHT","CENTER","NW","NE","SE","SW","ChainWindow","window1","margin","window","frame","parent","screen","flippedVisibleFrame","x","y","width","height","setFrame","space","normalSpaces","Space","all","filter","s","isNormal","length","targetSpace","targetScreen","screens","setFullScreen","spaces","map","removeWindows","addWindows","prevScreen","visibleFrame","nextScreen","xRatio","yRatio","Math","round","set","direction","difference","factor","stepX","stepY","sign","max","min","delta","maximize","includes","halve","to","fib","n","floor","a","b","c","d","fibonacci","Window","prototype","chain","winChain","winFibonacci","recentWindows","recent","w","isVisible","index","winTo","fit","fill","winFill","moveToSpace","winToSpace","resize","winResize","move","winMove","winFoldHorz","halveVertically","winFoldVert","guard","value","transform","undefined","i","Key","on","focused","next","array","last","focus"],"mappings":"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","file":"phoenix.js","sourcesContent":["// Globals\nconst HIDDEN_DOCK_MARGIN = 3;\nconst INCREMENT = 0.05;\nconst MOVE_BY = 0.05;\nconst CONTROL_SHIFT = ['ctrl', 'shift'];\nconst CONTROL_ALT_SHIFT = ['ctrl', 'alt', 'shift'];\n\n// Relative directions\nconst LEFT = 'left';\nconst RIGHT = 'right';\nconst CENTER = 'center';\n\n// Cardinal directions\nconst NW = 'nw';\nconst NE = 'ne';\nconst SE = 'se';\nconst SW = 'sw';\n\nclass ChainWindow {\n\n  constructor(window1, margin = 10) {\n    this.window = window1;\n    this.margin = margin;\n    this.frame = this.window.frame();\n    this.parent = this.window.screen().flippedVisibleFrame();\n  }\n\n  // Difference frame\n  difference() {\n    return {\n      x: this.parent.x - this.frame.x,\n      y: this.parent.y - this.frame.y,\n      width: this.parent.width - this.frame.width,\n      height: this.parent.height - this.frame.height,\n    };\n  }\n\n  // Set frame\n  set() {\n    this.window.setFrame(this.frame);\n    this.frame = this.window.frame();\n    return this;\n  }\n\n  // Move to screen\n  screen(screen) {\n    this.parent = screen.flippedVisibleFrame();\n    return this;\n  }\n\n  // Move window to space\n  space(space) {\n    const normalSpaces = Space.all().filter(s => s.isNormal());\n    if (space <= normalSpaces.length) {\n      const targetSpace = normalSpaces[space - 1];\n      const targetScreen = targetSpace.screens()[0];\n\n      this.window.setFullScreen(false);\n      this.window.spaces().map(s => s.removeWindows([this.window]));\n      targetSpace.addWindows([this.window]);\n\n      const prevScreen = this.window.screen().visibleFrame();\n      const nextScreen = targetScreen.visibleFrame();\n      const xRatio = nextScreen.width / prevScreen.width;\n      const yRatio = nextScreen.height / prevScreen.height;\n\n      this.frame.x = nextScreen.x\n        + (this.frame.x - prevScreen.x) * xRatio\n        + (1 - xRatio) * Math.round(0.5 * this.frame.width);\n      this.frame.y = nextScreen.y\n        + (this.frame.y - prevScreen.y) * yRatio\n        + (1 - yRatio) * Math.round(0.5 * this.frame.height);\n      this.screen(targetScreen);\n      this.set();\n    }\n    return this;\n  }\n\n  // Move to cardinal directions NW, NE, SE, SW or relative direction CENTER\n  to(direction) {\n    const difference = this.difference();\n\n    // X-coordinate\n    switch (direction) {\n      case NW:\n      case SW:\n        this.frame.x = this.parent.x + this.margin;\n        break;\n      case NE:\n      case SE:\n        this.frame.x = (this.parent.x + difference.width) - this.margin;\n        break;\n      case CENTER:\n        this.frame.x = this.parent.x + (difference.width / 2);\n        break;\n      default:\n        break;\n    }\n\n    // Y-coordinate\n    switch (direction) {\n      case NW:\n      case NE:\n        this.frame.y = this.parent.y + this.margin;\n        break;\n      case SE:\n      case SW:\n        this.frame.y = (this.parent.y + difference.height) - this.margin;\n        break;\n      case CENTER:\n        this.frame.y = this.parent.y + (difference.height / 2);\n        break;\n      default:\n        break;\n    }\n\n    return this;\n  }\n\n  // Move window by factor\n  move(factor) {\n    const difference = this.difference();\n    const [stepX, stepY] = [this.parent.width * factor.width || 0, // default to 0\n      this.parent.height * factor.height || 0];\n    // a single move can never occur in both dimensions -> addition is safe\n    switch (Math.sign(stepX + stepY)) {\n      case -1: // move left or up\n        this.frame.x = Math.max(this.frame.x + stepX,\n          this.parent.x + this.margin);\n        this.frame.y = Math.max(this.frame.y + stepY,\n          this.parent.y + this.margin);\n        break;\n      case 1: // move right or down\n        this.frame.x = Math.min(this.frame.x + stepX,\n          (this.parent.x + difference.width) - this.margin);\n        this.frame.y = Math.min(this.frame.y + stepY,\n          (this.parent.y + difference.height) - this.margin);\n        break;\n      default:\n    }\n    return this;\n  }\n\n  // Resize SE-corner by factor\n  resize(factor) {\n    const difference = this.difference();\n    if (factor.width != null) {\n      const delta = Math.min(this.parent.width * factor.width,\n        (difference.x + difference.width) - this.margin);\n      this.frame.width += delta;\n    }\n    if (factor.height != null) {\n      const delta = Math.min(this.parent.height * factor.height,\n        (difference.height - this.frame.y) + this.margin + HIDDEN_DOCK_MARGIN);\n      this.frame.height += delta;\n    }\n    return this;\n  }\n\n  // Maximize to fill whole screen\n  maximize() {\n    this.frame.width = this.parent.width - (2 * this.margin);\n    this.frame.height = this.parent.height - (2 * this.margin);\n    return this;\n  }\n\n  // Halve width\n  halve() {\n    this.frame.width /= 2;\n    return this;\n  }\n\n  halveVertically() {\n    this.frame.height /= 2;\n    return this;\n  }\n\n  // Fit to screen\n  fit() {\n    const difference = this.difference();\n    if (difference.width < 0 || difference.height < 0) {\n      this.maximize();\n    }\n    return this;\n  }\n\n  // Fill relatively to LEFT or RIGHT-side of screen, or fill whole screen\n  fill(direction) {\n    this.maximize();\n    if ([LEFT, RIGHT].includes(direction)) {\n      this.halve();\n    }\n    switch (direction) {\n      case LEFT:\n        this.to(NW);\n        break;\n      case RIGHT:\n        this.to(NE);\n        break;\n      default:\n        this.to(NW);\n    }\n    return this;\n  }\n\n}\n\nconst fib = (n) => {\n  if (n === 0) {\n    return [0, 1];\n  }\n  const [a, b] = fib(Math.floor(n / 2));\n  const c = a * ((b * 2) - a);\n  const d = (a * a) + (b * b);\n  if (n % 2 === 0) {\n    return [c, d];\n  }\n  return [d, c + d];\n};\n\nconst fibonacci = n => (\n  fib(n)[0]\n);\n\n// Chain a Window-object\nWindow.prototype.chain = function winChain() {\n  return new ChainWindow(this);\n};\n/* eslint-disable */\nWindow.prototype.fibonacci = function winFibonacci() {\n  const recentWindows = Window.recent().filter(w => w.isVisible());\n  recentWindows.map((w, index) => {\n    const window = w.chain();\n    /*\n     const [curr, next] = fib(recentWindows.length - index + 1) // 6 - 0 + 1\n     const ratio = curr/next;\n\n     let availHeight = screen.height;\n     let availWidth = screen.width;\n     pos = [0, 0];\n\n     // 1\n     w.height = availHeight;\n     delta = availWidth * ratio;\n     w.width = delta;\n     availWidth -=  delta;\n     pos[0] += delta;\n\n     // 2\n     w.width = availWidth;\n     delta = availHeight * ratio;\n     w.height = delta;\n     availHeight -= delta;\n     pos[0] += (1 - ratio) * availWidth;\n     pos[1] += delta;\n\n     // 3\n     w.height = availHeight;\n     delta = availWidth * ratio;\n     w.width = delta;\n     pos[0] += (1 - ratio) * availWidth;\n     availWidth -=  delta;\n\n     one = screensize/windowCount\n\n     1 - 0.5   (0.0,  0.0) // h/1 - w/2\n     2 - 0.5   (0.5,  0.0) // h/1 - w/2\n\n     1 - 0.5   (0.0,  0.0) // h/1 - w/2\n     2 - 0.25  (0.5,  0.0) // h/2 - w/2\n     3 - 0.25  (0.5,  0.5) // h/2 - w/2\n\n     1 - 0.5   (0.0,  0.0) // h/1 - w/2\n     2 - 0.25  (0.5,  0.0) // h/2 - w/2\n     3 - 0.125 (0.75, 0.5) // h/2 - w/4\n     4 - 0.125 (0.5,  0.5) // h/2 - w/4\n     */\n    return w;\n  });\n};\n\n// To direction in screen\nWindow.prototype.to = function winTo(direction, screen) {\n  const window = this.chain();\n  if (screen != null) {\n    window.screen(screen).fit();\n  }\n  return window.to(direction).set();\n};\n\n// Fill in screen\nWindow.prototype.fill = function winFill(direction, screen) {\n  const window = this.chain();\n  if (screen != null) {\n    window.screen(screen);\n  }\n  window.fill(direction).set();\n  // Ensure position for windows larger than expected\n  if (direction === RIGHT) {\n    return window.to(NE).set();\n  }\n  return window;\n};\n\nWindow.prototype.moveToSpace = function winToSpace(space) {\n  return this.chain().space(space).set();\n};\n\n// Resize by factor\nWindow.prototype.resize = function winResize(factor) {\n  return this.chain().resize(factor).set();\n};\n\nWindow.prototype.move = function winMove(factor) {\n  return this.chain().move(factor).set();\n};\n\nWindow.prototype.halve = function winFoldHorz() {\n  return this.chain().halve().set();\n};\n\nWindow.prototype.halveVertically = function winFoldVert() {\n  return this.chain().halveVertically().set();\n};\n\n\nfunction guard(value, transform) {\n  return (typeof value !== 'undefined' && value !== null) ? transform(value) : undefined;\n}\n\nfor (let i = 1; i <= 9; i += 1) {\n  Key.on(`${i}`, CONTROL_SHIFT, () => guard(Window.focused(), x => x.moveToSpace(i)));\n}\n\nKey.on('e', CONTROL_SHIFT, () => guard(Window.focused(), x => x.halve()));\n\nKey.on('r', CONTROL_SHIFT, () => guard(Window.focused(), x => x.halveVertically()));\n\n// Position Bindings\nKey.on('q', CONTROL_SHIFT, () => guard(Window.focused(), x => x.to(NW)));\n\nKey.on('w', CONTROL_SHIFT, () => guard(Window.focused(), x => x.to(NE)));\n\nKey.on('s', CONTROL_SHIFT, () => guard(Window.focused(), x => x.to(SE)));\n\nKey.on('a', CONTROL_SHIFT, () => guard(Window.focused(), x => x.to(SW)));\n\nKey.on('c', CONTROL_SHIFT, () => guard(Window.focused(), x => x.to(CENTER)));\n\nKey.on('q', CONTROL_ALT_SHIFT, () => {\n  const window = Window.focused();\n  return guard(window, x => x.to(NW, window.screen().next()));\n});\n\nKey.on('w', CONTROL_ALT_SHIFT, () => {\n  const window = Window.focused();\n  return guard(window, x => x.to(NE, window.screen().next()));\n});\n\nKey.on('s', CONTROL_ALT_SHIFT, () => {\n  const window = Window.focused();\n  return guard(window, x => x.to(SE, window.screen().next()));\n});\n\nKey.on('a', CONTROL_ALT_SHIFT, () => {\n  const window = Window.focused();\n  return guard(window, x => x.to(SW, window.screen().next()));\n});\n\nKey.on('c', CONTROL_ALT_SHIFT, () => {\n  const window = Window.focused();\n  return guard(window, x => x.to(CENTER, window.screen().next()));\n});\n\n// Fill Bindings\n\nKey.on('f', CONTROL_SHIFT, () => guard(Window.focused(), x => x.fill()));\n\nKey.on('o', CONTROL_SHIFT, () => guard(Window.focused(), x => x.fill(LEFT)));\n\nKey.on('p', CONTROL_SHIFT, () => guard(Window.focused(), x => x.fill(RIGHT)));\n\nKey.on('f', CONTROL_ALT_SHIFT, () => {\n  const window = Window.focused();\n  return guard(window, x => x.fill('', window.screen().next()));\n});\n\nKey.on('o', CONTROL_ALT_SHIFT, () => {\n  const window = Window.focused();\n  return guard(window, x => x.fill(LEFT, window.screen().next()));\n});\n\nKey.on('p', CONTROL_ALT_SHIFT, () => {\n  const window = Window.focused();\n  return guard(window, x => x.fill(RIGHT, window.screen().next()));\n});\n\n// Size Bindings\n\nKey.on('l', CONTROL_SHIFT, () => guard(Window.focused(), x => x.move({width: MOVE_BY})));\n\nKey.on('h', CONTROL_SHIFT, () => guard(Window.focused(), x => x.move({width: -MOVE_BY})));\n\nKey.on('j', CONTROL_SHIFT, () => guard(Window.focused(), x => x.move({height: MOVE_BY})));\n\nKey.on('k', CONTROL_SHIFT, () => guard(Window.focused(), x => x.move({height: -MOVE_BY})));\n\nKey.on('l', CONTROL_ALT_SHIFT, () => guard(Window.focused(), x => x.resize({width: INCREMENT})));\n\nKey.on('h', CONTROL_ALT_SHIFT, () => guard(Window.focused(), x => x.resize({width: -INCREMENT})));\n\nKey.on('j', CONTROL_ALT_SHIFT, () => guard(Window.focused(), x => x.resize({height: INCREMENT})));\n\nKey.on('k', CONTROL_ALT_SHIFT, () => guard(Window.focused(), x => x.resize({height: -INCREMENT})));\n\n// Focus Bindings\n\nKey.on('<', CONTROL_SHIFT, () => {\n  const array = Window.recent();\n  const last = array[array.length - 1];\n  return guard(last, x => x.focus());\n});\n"]}